<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>watatawa Software</title>
  <link rel="icon" href="icon.png" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ãƒšãƒ¼ã‚¸ã®èª¬æ˜">
  <meta name="keywords" content="ãƒšãƒ¼ã‚¸ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰A,B,C">
  <link rel="stylesheet" href="index.css">
</head>
<style>
  input {
    width: 15em;
    height: 1.4em;
}

 
 

</style>
<body>
  <div id="outer">
    <header>
      <div id="header-inner">
        <h1>watatawa Software</h1>
        <a href="index.html">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</a> ï½œ 
        <a href="market.html">ãƒãƒ¼ã‚±ãƒƒãƒˆã€ã‚¬ãƒ•å¸‚ã€‘</a> ï½œ 
        <a href="download.html">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</a> ï½œ 
        <a href="post.html">æ²ç¤ºæ¿</a> ï½œ  
        <a href="guff.html">ã‚¬ãƒ•æœ­æƒ…å ±</a> ï½œ 
        <a href="guffimage.html">ã‚¬ãƒ•ã®å†™çœŸé›†</a> ï½œ 
        <a href="chat.html">ãƒãƒ£ãƒƒãƒˆ</a>ï½œ 
        <a href="social.html">ã‚½ãƒ¼ã‚·ãƒ£ãƒ«</a>
      </div>
    </header>

    <main>
      <div id="text">
        <br>
        <br>
        <h2>ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</h2>
        <label>è¨€èªï¼š</label>
        <select id="language">
          <option value="japanese">æ—¥æœ¬èª</option>
        </select>

        <label>ã‚¸ãƒ£ãƒ³ãƒ«ï¼š</label>
        <select id="genre" onchange="loadGenreData()">
          <option value="ã™ã¹ã¦">ã™ã¹ã¦</option>
          <option value="ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</option>
          <option value="æ²ç¤ºæ¿ã‚¹ãƒ¬ãƒƒãƒ‰">æ²ç¤ºæ¿ã‚¹ãƒ¬ãƒƒãƒ‰</option>
        </select>

        ã€€
        <input type="text" id="searchInput" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
        <button onclick="searchFiles()">æ¤œç´¢ã€€ã€€</button>
        <div id="results"></div>

        <hr>
        <p>åˆ¶ä½œç›®æ¨™</p>
        <p>ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã®ä½œæˆ</p>
        <p>ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å¤‰æ›´</p>
        <p>ã¿ã‚“ãªã«å®£ä¼</p>

        <h4>ãŠçŸ¥ã‚‰ã›</h4>
        <h3>æ–°ã—ã1:1ã§ãƒãƒ£ãƒƒãƒˆãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</h3>
        <h4>æ²ç¤ºæ¿ã®UIã‚’å¤‰æ›´</h4>
        <p>ãªã‚“ã‹ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ãã›ã«æƒ…å ±é‡å°‘ãªã™ãã¦è‰</p>
        <img src="okok.jpg" width="184" height="31" alt="è‡ªç”±åˆ©ç”¨ãƒãƒ¼ã‚¯">
        <img src="ie.gif" width="90" height="70" alt="ie">
      </div>
    </main>

    <aside>
      <div class="side-title">menu</div>
      <a href="otoiawase.html">ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ </a><br>
      <a href="riyoukiyaku.html">åˆ©ç”¨è¦ç´„</a>
    </aside>

    <footer>all rights reserved Â©watatawa Software 2021~2025</footer>
  </div>

  <!-- ğŸ”§ JavaScript ã‚’ body ã®æœ€å¾Œã«ã¾ã¨ã‚ã¦ -->
  <script>
    let files = [];

    function loadGenreData() {
      const genre = document.getElementById('genre').value;
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = '';

      if (!genre) {
        files = [];
        resultsDiv.innerHTML = '<p>ã™ã¹ã¦ã®ã‚¸ãƒ£ãƒ³ãƒ«ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>';
        return;
      }

      fetch(`${genre}.json`)
        .then(res => res.json())
        .then(data => {
          files = data;
          resultsDiv.innerHTML = `<p>æ¤œç´¢å¯¾è±¡ï¼š${genre}</p>`;
        })
        .catch(() => {
          resultsDiv.innerHTML = `<p>${genre}.json ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>`;
        });
    }

    function normalize(str) {
  return str.normalize("NFKC").toLowerCase().replace(/\s+/g, '');
}


   function searchFiles() {
  const keyword = document.getElementById('searchInput').value.trim();
  const resultsDiv = document.getElementById('results');
  resultsDiv.innerHTML = '';

  if (!files.length) {
    resultsDiv.innerHTML = '<p>ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</p>';
    return;
  }

  if (!keyword) {
    resultsDiv.innerHTML = '<p>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
    return;
  }

  const firstChar = normalize(keyword).charAt(0);
  const matched = [];

  files.forEach(f => {
    const title = normalize(f.title);
    const file = normalize(f.file);

    // æ–‡å­—åˆ—ã‚’ç©ºç™½ãªã©ã§åˆ†å‰²ã—ã¦ã€å„å˜èªã®å…ˆé ­ã¨ä¸€è‡´ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    const titleWords = title.split(/[\sã€€ãƒ»,ã€ã€‚ï¼ï¼Ÿ]/);
    const fileWords = file.split(/[\sã€€ãƒ»,ã€ã€‚ï¼ï¼Ÿ]/);

    const titleMatch = titleWords.some(word => word.startsWith(firstChar));
    const fileMatch = fileWords.some(word => word.startsWith(firstChar));

    if (titleMatch || fileMatch) {
      matched.push(f);
    }
  });

  if (matched.length === 0) {
    resultsDiv.innerHTML = '<p>è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>';
  } else {
    matched.forEach(f => {
      const block = document.createElement('div');
      block.innerHTML = `
        <strong>${f.title}</strong><br>
        <a href="${f.file}">${f.file}</a>
        <hr>
      `;
      resultsDiv.appendChild(block);
    });
  }
}



    window.addEventListener('DOMContentLoaded', () => {
    loadGenreData(); // é¸æŠã•ã‚Œã¦ã„ã‚‹ value="files" ã‚’èª­ã¿è¾¼ã‚€
  });
  </script>
</body>
</html>
