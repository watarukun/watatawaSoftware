<!DOCTYPE html>
<html lang="ja">
<head>
<link rel="icon" href="icon.png" type="image/x-icon">
<meta charset="UTF-8">
<title>掲示板</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ページの説明">
<meta name="keywords" content="ページのキーワードA,B,C">
<link rel="stylesheet" href="index.css">
</head>
<body>
<div id="outer">
<header><div id="header-inner"><h1>watatawa Software</h1><a href="index.html">トップページ</a>   <a href="download.html">ダウンロード</a>   <a href="post.html">掲示板</a>   <a href="guff.html">ガフ札情報</a>
</div></header>
<main><div id="text">
<h2>掲示板</h2>

<form id="form">
    <input id="message" placeholder="メッセージ" required />
    <button>送信</button>
  </form>

  <ul id="messages"></ul>

  <script>
    const form = document.getElementById('form');
    const input = document.getElementById('message');
    const messages = document.getElementById('messages');

    // メッセージ読み込み
    async function loadMessages() {
      const res = await fetch('/messages');
      if (!res.ok) {
        messages.textContent = '読み込みに失敗しました';
        return;
      }
      const data = await res.json();
      messages.innerHTML = '';
      data.forEach(msg => {
        const li = document.createElement('li');
        li.textContent = msg.text;
        messages.appendChild(li);
      });
    }

    // 送信処理
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const text = input.value.trim();
      if (!text) return;
      const res = await fetch('/save', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: text })
      });
      if (res.ok) {
        input.value = '';
        loadMessages();
      } else {
        alert('送信失敗');
      }
    });

    loadMessages();
  </script>


  



</div>
</main>
<aside>
<div class="side-title">menu</div>
<div class="side">
<ul>
 

</ul>
</div>
</aside>
<footer>all rights reserved ©watatawa Software 2021~2025</footer>